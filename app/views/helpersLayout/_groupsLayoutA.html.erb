<!-- Creamos un conteo de los grupos (Esto servirá de apoyo en JavaScript) !-->
<% j = 0%>
<div class="hojas_groups">
<% @groups.each do |g|%>
  <% j += 1%> <!-- Sumatoria del conteo de grupos !-->
  <% turno = ":v" %>
  <% if g[0][:turn] == "M" %>
    <% turno = "Matutino" %>
  <% elsif g[0][:turn] == "V" %>
    <% turno = "Vespertino" %>
  <% end %>

  <!-- Creamos un section para cada grupo !-->
  <div class="group content hide sombra  " id="group_<%=j%>">
    <div class="groupsHeader_groups">
      <!-- Imprimimos la especialidad y el turno !-->
      <h1><%= g[0][:speciality] %> <%= turno %></h1>
      <!-- Los grupos están generados con números 1, 2, 3... Así que llamamos al array con el alfabeto e intercambiamos los números por una letra A, B, C... !-->
      <h2>Grupo <%= @groupIdentifier[g[0][:group]] %></h2>
    </div>

    <!-- Los grupos están guardados como M y V, así que hacemos vriables que indiquen cada uno pero como Matutino y Vespertino !-->
    <table class="move_table">
      <!-- Encabezado de la tabla !-->
      <thead>
        <tr>
          <th class="tama2">No.</th>
          <th class="tama2">Nombre</th>
          <th class="tama2">Apellido Paterno</th>
          <th class="tama2">Apellido Materno</th>
          <th class="tama2">Calificacion del examen</th>
        </tr>
      </thead>

      <!-- Agregamos los datos en las tablas dependiendo del grupo que se itera !-->
      <tbody>
        <% i = 0 %>
        <% Accepted.all.where(finalSpeciality: g[0][:speciality], group: g[0][:group], turn: g[0][:turn]).each do |accepted| %>
        <% i+=1 %>
        <tr>
          <td class="tama"><%= i %></td>
          <td class="tama"><%= accepted.name %></td>
          <td class="tama"><%= accepted.apellidoPaterno %></td>
          <td class="tama"><%= accepted.apellidoMaterno %></td>
          <td class="tama"><%= accepted.examMark %></td>
          <td><%= link_to '', edit_accepted_path(accepted), class:"icon-pencil"%></td>
          <td><%= link_to '', accepted, method: :delete, class:"icon-bin2", data: { confirm: 'Are you sure?' } %></td>
        </tr>
        <% end %>
      </tbody>

    </table>

  </div>
<% end %>
  <!-- Creamos un section para cada grupo !-->
  <div class="group content hide sombra" id="none_group">

    <div class="groupsHeader_groups">
      <p>Sin especialidad</p>
    </div>
    <table>
      <thead >
        <tr>
          <th>Nombre</th>
          <th>Apellido paterno</th>
          <th>Apellido materno</th>
          <th>Examen</th>
          <th>Secundaria</th>
          <th>Primera Especialidad</th>
          <th>Segunda Especialidad</th>

          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% Accepted.all.where(finalSpeciality: "null").each do |accepted| %>
          <tr>
            <td class="filasmodi"><%=  accepted.name %></td>
            <td  class="filasmodi"><%=  accepted.apellidoPaterno %></td>
            <td  class="filasmodi"><%=  accepted.apellidoMaterno %></td>
            <td  class="filasmodi"><%=  accepted.examMark %></td>
            <td  class="filasmodi"><%=  accepted.schoolAverage %></td>
            <td  class="filasmodi"><%=  accepted.speciality %></td>
            <td  class="filasmodi"><%=  accepted.secondSpeciality %></td>
            <td  class="filasmodi"><%= link_to '', edit_accepted_path( accepted), class:"icon-pencil" %></td>
            <td  class="filasmodi"><%= link_to '',  accepted, method: :delete, class:"icon-bin2", data: { confirm: '¿Desea eliminar el elemento?' } %></td>
          </tr>

        <% end %>
      </tbody>
    </table>

  </div>
</div>
